<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>悦吉商城</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="orange">
	
    <link rel="stylesheet" href="css/mui.min.css">
    <link rel="stylesheet" href="css/icons-extra.css">
	
</head>
<body>
	<header class="mui-bar mui-bar-nav">
		<a class="mui-icon mui-icon-bars mui-pull-left mui-plus-visible"></a>
		<a id="info" class="mui-icon mui-icon-info-filled mui-pull-right" style="color: #999;"></a>
		<h1 id="web-title" class="mui-title">商城首页</h1>
	</header>
	    
	<!--start footer-->
	<nav class="mui-bar mui-bar-tab">
		<a id="defaultTab" class="mui-tab-item mui-active" href="home/home.html">
			<span class="mui-icon mui-icon-home"></span>
			<span class="mui-tab-label">首页</span>
		</a>
		<a class="mui-tab-item" href="home/sort.html">
			<span class="mui-icon mui-icon-list">
			</span>
			<span class="mui-tab-label">分类</span>
		</a>
		<a class="mui-tab-item" href="home/shopcart.html">
			<span class="mui-icon mui-icon-extra mui-icon-extra-cart">
			</span>
			<span class="mui-tab-label">购物车</span>
		</a>
		<a id="bbs" class="mui-tab-item" href="person/index.html">
			<span class="mui-icon mui-icon-contact">
				<span class="mui-badge">1</span>
			</span>
			<span class="mui-tab-label">我的</span>
		</a>
	</nav>
<!--end footer-->
	
    <script src="js/mui.min.js"></script>
    <script type="text/javascript">
    	var menu = null,
    		main = null,
    		showMenu = false,
    		subpages = ['home/home.html', 'home/sort.html', 'home/shopcart.html', 'person/index.html'],
    		subpage_style = {
    			top: '46px',
    			bottom: '50px'
    		};
    	
    	//初始化-首页
		mui.init({
			preloadLimit: 10,
			statusBarBackground :'#fda76e',
			subpages:[{
		      url: subpages[0],
		      id: subpages[0],
		      styles: subpage_style
		   }]
		});
		
		mui.plusReady(function(){
			//预加载页面
			var leng = subpages.length;
			var self = plus.webview.currentWebview();
			for(var i=0 ; i < leng ; i++ ){
				var sub = plus.webview.create(subpages[i],subpages[i],subpage_style);
				if(i>0){
					sub.hide();
				}
				self.append(sub);
			}
			
			//选项卡点击事件
			var activeTab = subpages[0];
			var title = document.getElementById("web-title");
			mui('.mui-bar-tab').on('tap', 'a', function(e) {
				var targetTab = this.getAttribute('href');
				if (targetTab == activeTab) {
					return;
				}
				//更换标题
				title.innerHTML = this.querySelector('.mui-tab-label').innerHTML;
				//显示目标选项卡
				plus.webview.show(targetTab);
				//隐藏当前;
				plus.webview.hide(activeTab);
				//更改当前活跃的选项卡
				activeTab = targetTab;
			});
			
		});
		
		
	
	
    </script>
</body>
</html>